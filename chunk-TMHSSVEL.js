import{a as R,b as g,c as D,d as q,e as M,f as B,g as I,h as L,i as j,j as z,k as O}from"./chunk-G2TIJ6QF.js";import"./chunk-MNWXOYMR.js";import{c as T,j as k,t as A}from"./chunk-C2AWYGKS.js";import{Ab as c,Ka as V,Pa as G,T as C,Va as d,Z as x,_ as v,_a as y,cb as l,db as s,eb as p,ib as b,lb as h,mb as f,oa as E,ub as a,vb as N,yb as w,za as u}from"./chunk-YJEK7Y54.js";import"./chunk-4CLCTAJ7.js";var P=o=>({"text-blue-500":o}),S=o=>({"border-blue-500":o}),_=(o,i,e)=>({"border-red-700 text-red-800":o,"border-gray-300 text-gray-900":i,"border-green-600 text-greborder-green-600":e}),F=(o,i,e)=>({"text-red-500":o,"text-gray-500":i,"text-green-500":e});function H(o,i){if(o&1){let e=b();l(0,"form",7),h("ngSubmit",function(){x(e);let r=f();return v(r.emailStep())}),l(1,"div",8),p(2,"input",9),l(3,"label",10),a(4,"Email address"),s(),l(5,"p",11),p(6,"i",12),a(7," write a valid email"),s()(),l(8,"button",13),a(9,"verify email"),s()()}if(o&2){let e,t,r=f();d("formGroup",r.email),u(2),d("ngClass",c(3,_,((e=r.email.get("email"))==null?null:e.errors)&&((e=r.email.get("email"))==null?null:e.touched),!((e=r.email.get("email"))!=null&&e.errors&&((e=r.email.get("email"))!=null&&e.touched)),((e=r.email.get("email"))==null?null:e.valid)&&((e=r.email.get("email"))==null?null:e.touched))),u(),d("ngClass",c(7,F,((t=r.email.get("email"))==null?null:t.errors)&&((t=r.email.get("email"))==null?null:t.touched),!((t=r.email.get("email"))!=null&&t.errors&&((t=r.email.get("email"))!=null&&t.touched)),((t=r.email.get("email"))==null?null:t.valid)&&((t=r.email.get("email"))==null?null:t.touched)))}}function J(o,i){if(o&1){let e=b();l(0,"form",7),h("ngSubmit",function(){x(e);let r=f();return v(r.codeStep())}),l(1,"div",8),p(2,"input",14),l(3,"label",10),a(4,"code"),s(),l(5,"p",11),p(6,"i",12),a(7," write a valid code"),s()(),l(8,"button",13),a(9,"verify code"),s()()}if(o&2){let e,t,r=f();d("formGroup",r.verifyCode),u(2),d("ngClass",c(3,_,((e=r.verifyCode.get("resetCode"))==null?null:e.errors)&&((e=r.verifyCode.get("resetCode"))==null?null:e.touched),!((e=r.verifyCode.get("resetCode"))!=null&&e.errors&&((e=r.verifyCode.get("resetCode"))!=null&&e.touched)),((e=r.verifyCode.get("resetCode"))==null?null:e.valid)&&((e=r.verifyCode.get("resetCode"))==null?null:e.touched))),u(),d("ngClass",c(7,F,((t=r.verifyCode.get("resetCode"))==null?null:t.errors)&&((t=r.verifyCode.get("resetCode"))==null?null:t.touched),!((t=r.verifyCode.get("resetCode"))!=null&&t.errors&&((t=r.verifyCode.get("resetCode"))!=null&&t.touched)),((t=r.verifyCode.get("resetCode"))==null?null:t.valid)&&((t=r.verifyCode.get("resetCode"))==null?null:t.touched)))}}function K(o,i){if(o&1){let e=b();l(0,"form",7),h("ngSubmit",function(){x(e);let r=f();return v(r.resetStep())}),l(1,"div",8),p(2,"input",9),l(3,"label",10),a(4,"email"),s(),l(5,"p",11),p(6,"i",12),a(7," write a valid email"),s()(),l(8,"div",8),p(9,"input",15),l(10,"label",16),a(11,"new password"),s(),l(12,"p",11),p(13,"i",12),a(14," write at least 8 characters"),s()(),l(15,"button",13),a(16,"send"),s()()}if(o&2){let e,t,r,m,n=f();d("formGroup",n.newPassword),u(2),d("ngClass",c(5,_,((e=n.newPassword.get("email"))==null?null:e.errors)&&((e=n.newPassword.get("email"))==null?null:e.touched),!((e=n.newPassword.get("email"))!=null&&e.errors&&((e=n.newPassword.get("email"))!=null&&e.touched)),((e=n.newPassword.get("email"))==null?null:e.valid)&&((e=n.newPassword.get("email"))==null?null:e.touched))),u(),d("ngClass",c(9,F,((t=n.newPassword.get("email"))==null?null:t.errors)&&((t=n.newPassword.get("email"))==null?null:t.touched),!((t=n.newPassword.get("email"))!=null&&t.errors&&((t=n.newPassword.get("email"))!=null&&t.touched)),((t=n.newPassword.get("email"))==null?null:t.valid)&&((t=n.newPassword.get("email"))==null?null:t.touched))),u(6),d("ngClass",c(13,_,((r=n.newPassword.get("password"))==null?null:r.errors)&&((r=n.newPassword.get("password"))==null?null:r.touched),!((r=n.newPassword.get("password"))!=null&&r.errors&&((r=n.newPassword.get("password"))!=null&&r.touched)),((r=n.newPassword.get("password"))==null?null:r.valid)&&((r=n.newPassword.get("password"))==null?null:r.touched))),u(),d("ngClass",c(17,_,((m=n.newPassword.get("password"))==null?null:m.errors)&&((m=n.newPassword.get("password"))==null?null:m.touched),!((m=n.newPassword.get("password"))!=null&&m.errors&&((m=n.newPassword.get("password"))!=null&&m.touched)),((m=n.newPassword.get("password"))==null?null:m.valid)&&((m=n.newPassword.get("password"))==null?null:m.touched)))}}function Q(o,i){if(o&1&&(l(0,"p",6),a(1),s()),o&2){let e=f();u(),N(e.msgError)}}var $=class o{_FormBuilder=C(j);_AuthService=C(O);_PLATFORM_ID=C(E);_Router=C(A);steps=1;msgError;email=this._FormBuilder.group({email:[null,[g.required,g.email]]});verifyCode=this._FormBuilder.group({resetCode:[null,[g.required,g.pattern(/^[0-9]{6}$/)]]});newPassword=this._FormBuilder.group({email:[null,[g.required,g.email]],newPassword:[null,[g.required,g.minLength(8)]]});emailStep(){this.email.valid&&this._AuthService.forgotPassword(this.email.value).subscribe({next:i=>{i.statusMsg=="success"&&(this.steps++,this.msgError=null)},error:i=>{this.msgError=i.error.message}})}codeStep(){this.verifyCode.valid&&this._AuthService.verifyResetCode(this.verifyCode.value).subscribe({next:i=>{i.status=="Success"&&(this.steps++,this.msgError=null)},error:i=>{this.msgError=i.error.message}})}resetStep(){this.newPassword.valid&&this._AuthService.resetPassword(this.newPassword.value).subscribe({next:i=>{i.token&&k(this._PLATFORM_ID)&&this._Router.navigate(["/"])},error:i=>{this.msgError=i.error.message}})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=V({type:o,selectors:[["app-forget-password"]],decls:24,vars:20,consts:[[1,"items-center","w-full","space-y-4","sm:flex","sm:space-x-8","sm:space-y-0","rtl:space-x-reverse"],[1,"flex","items-center","space-x-2.5","rtl:space-x-reverse",3,"ngClass"],[1,"flex","items-center","justify-center","w-8","h-8","border","rounded-full","shrink-0",3,"ngClass"],[1,"font-medium","leading-tight"],[1,"flex","flex-col","items-center","justify-center","w-full","p-6","space-y-4","bg-white","rounded-lg","shadow","md:space-y-6","sm:p-8"],[1,"w-64","md:w-96",3,"formGroup"],[1,"rounded-md","bg-red-300","text-red-500","p-4"],[1,"w-64","md:w-96",3,"ngSubmit","formGroup"],[1,"relative","z-0","w-full","mb-5","group"],["formControlName","email","type","email","name","floating_email","id","floating_email","placeholder"," ","required","",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-nonefocus:outline-none","focus:ring-0","focus:border-blue-600","peer",3,"ngClass"],["for","floating_email",1,"peer-focus:font-medium","absolute","text-sm","text-gray-500","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","rtl:peer-focus:left-auto","peer-focus:text-blue-600","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6",3,"ngClass"],[1,"text-blue-400","mt-5","mb-2"],[1,"fa","fa-exclamation-circle"],["type","submit",1,"text-white","block","mx-auto","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300","font-medium","rounded-lg","text-sm","w-full","sm:w-auto","px-5","py-2.5","text-center","dark:bg-blue-600","dark:hover:bg-blue-700","dark:focus:ring-blue-800"],["formControlName","resetCode","type","text","name","floating_email","id","floating_email","placeholder"," ",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-nonefocus:outline-none","focus:ring-0","focus:border-blue-600","peer",3,"ngClass"],["formControlName","newPassword","type","password","name","floating_password","id","floating_password","placeholder"," ","required","",1,"block","py-2.5","px-0","w-full","text-sm","text-gray-900","bg-transparent","border-0","border-b-2","border-gray-300","appearance-nonefocus:outline-none","focus:ring-0","focus:border-blue-600","peer",3,"ngClass"],["for","floating_password",1,"peer-focus:font-medium","absolute","text-sm","text-gray-500","duration-300","transform","-translate-y-6","scale-75","top-3","-z-10","origin-[0]","peer-focus:start-0","rtl:peer-focus:translate-x-1/4","peer-focus:text-blue-600","peer-placeholder-shown:scale-100","peer-placeholder-shown:translate-y-0","peer-focus:scale-75","peer-focus:-translate-y-6",3,"ngClass"]],template:function(e,t){e&1&&(l(0,"ol",0)(1,"li",1)(2,"span",2),a(3," 1 "),s(),l(4,"span")(5,"h3",3),a(6,"verify email"),s()()(),l(7,"li",1)(8,"span",2),a(9," 2 "),s(),l(10,"span")(11,"h3",3),a(12,"verify code "),s()()(),l(13,"li",1)(14,"span",2),a(15," 3 "),s(),l(16,"span")(17,"h3",3),a(18,"change password"),s()()()(),l(19,"div",4),G(20,H,10,11,"form",5)(21,J,10,11,"form",5)(22,K,17,21,"form",5)(23,Q,2,1,"p",6),s()),e&2&&(u(),d("ngClass",w(8,P,t.steps==1)),u(),d("ngClass",w(10,S,t.steps==1)),u(5),d("ngClass",w(12,P,t.steps==2)),u(),d("ngClass",w(14,S,t.steps==2)),u(5),d("ngClass",w(16,P,t.steps==3)),u(),d("ngClass",w(18,S,t.steps==3)),u(6),y(t.steps==1?20:t.steps==2?21:t.steps==3?22:-1),u(3),y(t.msgError?23:-1))},dependencies:[z,M,R,D,q,L,B,I,T],encapsulation:2})};export{$ as ForgetPasswordComponent};
